"use strict";(self.webpackChunkdocusaurus_classic_typescript=self.webpackChunkdocusaurus_classic_typescript||[]).push([[4706],{1931:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>g,frontMatter:()=>i,metadata:()=>s,toc:()=>p});var r=t(11),a=(t(2735),t(9530));const i={},o="Publishing Packages, Releases, and More",s={unversionedId:"contributing/publishing",id:"contributing/publishing",title:"Publishing Packages, Releases, and More",description:"WordPress Playground has many types of artifacts that are published.",source:"@site/docs/13-contributing/06-publishing.md",sourceDirName:"13-contributing",slug:"/contributing/publishing",permalink:"/wordpress-playground/contributing/publishing",draft:!1,editUrl:"https://github.com/WordPress/wordpress-playground/tree/trunk/packages/docs/site/docs/13-contributing/06-publishing.md",tags:[],version:"current",sidebarPosition:6,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Triage Contributions",permalink:"/wordpress-playground/contributing/triage"},next:{title:"Contributing Documentation",permalink:"/wordpress-playground/contributing/documentation"}},l={},p=[{value:"NPM packages",id:"npm-packages",level:2},{value:"After publishing",id:"after-publishing",level:3},{value:"When publishing packages goes wrong",id:"when-publishing-packages-goes-wrong",level:3}],u={toc:p},c="wrapper";function g(e){let{components:n,...t}=e;return(0,a.kt)(c,(0,r.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"publishing-packages-releases-and-more"},"Publishing Packages, Releases, and More"),(0,a.kt)("p",null,"WordPress Playground has many types of artifacts that are published."),(0,a.kt)("p",null,"NPM packages, GitHub releases, and playground.wordpress.net website are published by project maintainers through GitHub Actions."),(0,a.kt)("p",null,"Below you'll find more details about parts of that process."),(0,a.kt)("h2",{id:"npm-packages"},"NPM packages"),(0,a.kt)("p",null,"WordPress Playground is a monorepo and uses Lerna for publishing npm packages."),(0,a.kt)("p",null,"The publishing process is facilitated by Lerna, and includes automatically incrementing the version number, creating a new tag, and publishing all modified packages to npm simultaneously."),(0,a.kt)("p",null,"Notably, all published packages share the same version number. All packages use the same version number. If you update a single package, Lerna will automatically bump the version number for all dependent packages."),(0,a.kt)("p",null,"Each package identifies a distinct organization in its ",(0,a.kt)("inlineCode",{parentName:"p"},"package.json")," file. To publish WordPress Playground packages, you need access to the following npm organizations:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"@wp-playground")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"@php-wasm"))),(0,a.kt)("p",null,"To initiate the publishing process for the all the modified packages, execute the following commands:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"npm login #\xa0this is required only once and it will store the credentials in ~/.npmrc file.\nnpm run release\n")),(0,a.kt)("h3",{id:"after-publishing"},"After publishing"),(0,a.kt)("p",null,"To verify the publishing process went correctly:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Please verify ",(0,a.kt)("a",{parentName:"li",href:"https://translate.wordpress.org/projects/wp-plugins/contact-form-7/dev/de/default/playground/"},"https://translate.wordpress.org/projects/wp-plugins/contact-form-7/dev/de/default/playground/")," loads as expected. If it doesn't load, something broke.")),(0,a.kt)("h3",{id:"when-publishing-packages-goes-wrong"},"When publishing packages goes wrong"),(0,a.kt)("p",null,"Internet connections drop, APIs stop responding, and GitHub rules are nasty. Stuff happens. If the publishing process fails, you may need to bump the version again and force a publish. To do so, execute the following command:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"npm run release -- --force-publish\n")))}g.isMDXComponent=!0},9530:(e,n,t)=>{t.d(n,{Zo:()=>u,kt:()=>b});var r=t(2735);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var l=r.createContext({}),p=function(e){var n=r.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},u=function(e){var n=p(e.components);return r.createElement(l.Provider,{value:n},e.children)},c="mdxType",g={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},d=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,i=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),c=p(t),d=a,b=c["".concat(l,".").concat(d)]||c[d]||g[d]||i;return t?r.createElement(b,o(o({ref:n},u),{},{components:t})):r.createElement(b,o({ref:n},u))}));function b(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var i=t.length,o=new Array(i);o[0]=d;var s={};for(var l in n)hasOwnProperty.call(n,l)&&(s[l]=n[l]);s.originalType=e,s[c]="string"==typeof e?e:a,o[1]=s;for(var p=2;p<i;p++)o[p]=t[p];return r.createElement.apply(null,o)}return r.createElement.apply(null,t)}d.displayName="MDXCreateElement"}}]);